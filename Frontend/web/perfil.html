<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Usuario</title>
    <link rel="stylesheet" href="/barberia/Frontend/css/perfil.css">
</head>
<body>
    <header>
        <h1>Mi Perfil</h1>
    </header>
    
    <main>
        <section class="perfil">
            <div class="info-perfil">
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" disabled value="Nombre del Usuario">

                <label for="correo">Correo:</label>
                <input type="email" id="correo" disabled value="correo@ejemplo.com">

                <button id="editar" onclick="habilitarEdicion()">Editar Información</button>
                <button id="guardar" onclick="guardarCambios()" style="display: none;">Guardar Cambios</button>
            </div>
        </section>

        <section class="historial-servicios">
            <h2>Historial de Servicios</h2>
            <table id="tablaHistorial">
                <thead>
                    <tr>
                        <th>Servicio</th>
                        <th>Precio</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Los servicios se agregan dinámicamente -->
                </tbody>
                <tfoot>
                    <tr>
                        <td>Total</td>
                        <td id="totalGastado">$0</td>
                    </tr>
                </tfoot>
            </table>
            <button class="button" onclick="window.location.href='/barberia/Frontend/web/inicio.html'">Regresar</button>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 Barbería. Todos los derechos reservados.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Cargar datos guardados previamente
            document.getElementById("nombre").value = localStorage.getItem("clienteNombre") || "Nombre del Usuario";
            document.getElementById("correo").value = localStorage.getItem("clienteCorreo") || "correo@ejemplo.com";
        
            // Cargar historial de servicios en la tabla
            cargarHistorialServicios();
        });

        function habilitarEdicion() {
            document.getElementById("nombre").disabled = false;
            document.getElementById("correo").disabled = false;
            document.getElementById("guardar").style.display = "inline";
            document.getElementById("editar").style.display = "none";
        }

        function guardarCambios() {
            const nombre = document.getElementById("nombre").value;
            const correo = document.getElementById("correo").value;
        
            // Guardar en localStorage
            localStorage.setItem("clienteNombre", nombre);
            localStorage.setItem("clienteCorreo", correo);

            document.getElementById("nombre").disabled = true;
            document.getElementById("correo").disabled = true;
            document.getElementById("guardar").style.display = "none";
            document.getElementById("editar").style.display = "inline";

            alert("Cambios guardados correctamente.");
        }

        function cargarHistorialServicios() {
            const historialServicios = JSON.parse(localStorage.getItem("historialServicios")) || [
                { servicio: "Corte de Cabello", precio: 100 },
                { servicio: "Afeitado", precio: 150 },
                { servicio: "Mascarilla", precio: 200 }
            ];

            const tabla = document.querySelector("#tablaHistorial tbody");
            tabla.innerHTML = "";

            let total = 0;
            historialServicios.forEach(servicio => {
                const fila = document.createElement("tr");
                fila.innerHTML = `
                    <td>${servicio.servicio}</td>
                    <td>$${servicio.precio}</td>
                `;
                tabla.appendChild(fila);
                total += servicio.precio;
            });
            
            document.getElementById("totalGastado").textContent = `$${total}`;
        }
    </script>
</body>
</html>
